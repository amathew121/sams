<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    

    <ui:composition template="/template.xhtml">
        <ui:define name="title">

            <h:outputText value="Faculty Subject Information"></h:outputText>
        </ui:define>
        <ui:define name="body"> 
            <h:form>
                <p:selectOneMenu value="#{currentStudentController.program}" >
                    <f:selectItems noSelectionValue="#{programController.getProgram('BE')}" value="#{programController.itemsAvailableSelectOne}" />
                </p:selectOneMenu>
                <p:selectOneMenu value="#{currentStudentController.course}" >
                    <f:selectItems value="#{courseController.itemsAvailableSelectOne}" />
                </p:selectOneMenu>
                <p:selectOneMenu value="#{currentStudentController.semester}" >
                                        <f:selectItem itemLabel="Sem"  />

                    <f:selectItem itemLabel="1" itemValue="1" />
                        <f:selectItem itemLabel="2" itemValue="2" />
                        <f:selectItem itemLabel="3" itemValue="3" />
                        <f:selectItem itemLabel="4" itemValue="4" />
                        <f:selectItem itemLabel="5" itemValue="5" />
                        <f:selectItem itemLabel="6" itemValue="6" />
                        <f:selectItem itemLabel="7" itemValue="7" />
                        <f:selectItem itemLabel="8" itemValue="8" />
                </p:selectOneMenu>
                <p:selectOneMenu value="#{currentStudentController.division}" >
                    <f:selectItem itemLabel="Div"  />

                    <f:selectItem itemLabel="A" itemValue="A" />
                    <f:selectItem itemLabel="B" itemValue="B" />
                    <f:selectItem itemLabel="C" itemValue="C" />
                    <f:selectItem itemLabel="D" itemValue="D" />
                    <f:selectItem itemLabel="E" itemValue="E" />
                    <f:selectItem itemLabel="F" itemValue="F" />
                    <f:selectItem itemLabel="G" itemValue="G" />
                    <f:selectItem itemLabel="H" itemValue="H" />
                    <f:selectItem itemLabel="I" itemValue="I" />
                    <f:selectItem itemLabel="J" itemValue="J" />
                </p:selectOneMenu>
                <br />
                
                <p:commandButton value="Submit" action="#{currentStudentController.navList()}" update=":attendanceList"/>
            
            </h:form>
            <h:form id="attendanceList">
                <p:dataTable rendered="#{currentStudentController.subject.size()>0}" value="#{currentStudentController.attendanceList}"  var="c">

                    <p:columnGroup type="header">  
                        <p:row>  
                            <p:column rowspan="4" headerText="RollNo" />
                            <p:column rowspan="4" headerText="Student Name" />  
                            <p:column colspan="#{(currentStudentController.subject.size())*4}" headerText="Subjects" />  
                            <p:column rowspan="2" colspan="2" headerText="Total" />
                        </p:row>  

                        <p:row>  
                            <p:column colspan="4" rendered="#{currentStudentController.subject.size()>0}" resizable="true" headerText="#{currentStudentController.subject.get(0).subjectCode}" />  
                            <p:column colspan="4" rendered="#{currentStudentController.subject.size()>1}" resizable="true" headerText="#{currentStudentController.subject.get(1).subjectCode}" />  
                            <p:column colspan="4" rendered="#{currentStudentController.subject.size()>2}" resizable="true" headerText="#{currentStudentController.subject.get(2).subjectCode}" />  
                            <p:column colspan="4" rendered="#{currentStudentController.subject.size()>3}" resizable="true" headerText="#{currentStudentController.subject.get(3).subjectCode}" />  
                            <p:column colspan="4" rendered="#{currentStudentController.subject.size()>4}" resizable="true" headerText="#{currentStudentController.subject.get(4).subjectCode}" />  
                            <p:column colspan="4" rendered="#{currentStudentController.subject.size()>5}" resizable="true" headerText="#{currentStudentController.subject.get(5).subjectCode}" />  
                            <p:column colspan="4" rendered="#{currentStudentController.subject.size()>6}" resizable="true" headerText="#{currentStudentController.subject.get(6).subjectCode}" />  
                            <p:column colspan="4" rendered="#{currentStudentController.subject.size()>7}" resizable="true" headerText="#{currentStudentController.subject.get(7).subjectCode}" />  
                            <p:column colspan="4" rendered="#{currentStudentController.subject.size()>8}" resizable="true" headerText="#{currentStudentController.subject.get(8).subjectCode}" />  
                            <p:column colspan="4" rendered="#{currentStudentController.subject.size()>9}" resizable="true" headerText="#{currentStudentController.subject.get(9).subjectCode}" />  

                        </p:row>  
                        <p:row>  
                            <p:column rendered="#{currentStudentController.subject.size()>0}" resizable="true" headerText="#{lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(0))).size()}" />  
                            <p:column rendered="#{currentStudentController.subject.size()>0}" resizable="true" headerText="%" />  
                            <p:column rendered="#{currentStudentController.subject.size()>0}" resizable="true" headerText="T" />  
                            <p:column rendered="#{currentStudentController.subject.size()>0}" resizable="true" headerText="T2" />  
                            
                            <p:column rendered="#{currentStudentController.subject.size()>1}" resizable="true" headerText="#{lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(1))).size()}" />  
                            <p:column rendered="#{currentStudentController.subject.size()>1}" resizable="true" headerText="%" />  
                            <p:column rendered="#{currentStudentController.subject.size()>1}" resizable="true" headerText="T" />  
                            <p:column rendered="#{currentStudentController.subject.size()>1}" resizable="true" headerText="T2" />  

                            <p:column rendered="#{currentStudentController.subject.size()>2}" resizable="true" headerText="#{lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(2))).size()}" />  
                            <p:column rendered="#{currentStudentController.subject.size()>2}" resizable="true" headerText="%" />  
                            <p:column rendered="#{currentStudentController.subject.size()>2}" resizable="true" headerText="T" />  
                            <p:column rendered="#{currentStudentController.subject.size()>2}" resizable="true" headerText="T2" />  

                            <p:column rendered="#{currentStudentController.subject.size()>3}" resizable="true" headerText="#{lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(3))).size()}" />  
                            <p:column rendered="#{currentStudentController.subject.size()>3}" resizable="true" headerText="%" />  
                            <p:column rendered="#{currentStudentController.subject.size()>3}" resizable="true" headerText="T" />  
                            <p:column rendered="#{currentStudentController.subject.size()>3}" resizable="true" headerText="T2" />  
                            
                            <p:column rendered="#{currentStudentController.subject.size()>4}" resizable="true" headerText="#{lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(4))).size()}" />  
                            <p:column rendered="#{currentStudentController.subject.size()>4}" resizable="true" headerText="%" />  
                            <p:column rendered="#{currentStudentController.subject.size()>4}" resizable="true" headerText="T" />  
                            <p:column rendered="#{currentStudentController.subject.size()>4}" resizable="true" headerText="T2" />  
                            
                            <p:column rendered="#{currentStudentController.subject.size()>5}" resizable="true" headerText="#{lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(5))).size()}" />  
                            <p:column rendered="#{currentStudentController.subject.size()>5}" resizable="true" headerText="%" />  
                            <p:column rendered="#{currentStudentController.subject.size()>5}" resizable="true" headerText="T" />  
                            <p:column rendered="#{currentStudentController.subject.size()>5}" resizable="true" headerText="T2" />  
                            
                            <p:column rendered="#{currentStudentController.subject.size()>6}" resizable="true" headerText="#{lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(6))).size()}" />  
                            <p:column rendered="#{currentStudentController.subject.size()>6}" resizable="true" headerText="%" />  
                            <p:column rendered="#{currentStudentController.subject.size()>6}" resizable="true" headerText="T" />  
                            <p:column rendered="#{currentStudentController.subject.size()>6}" resizable="true" headerText="T2" />  
                            
                            <p:column rendered="#{currentStudentController.subject.size()>7}" resizable="true" headerText="#{lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(7))).size()}" />  
                            <p:column rendered="#{currentStudentController.subject.size()>7}" resizable="true" headerText="%" />  
                            <p:column rendered="#{currentStudentController.subject.size()>7}" resizable="true" headerText="T" />  
                            <p:column rendered="#{currentStudentController.subject.size()>7}" resizable="true" headerText="T2" />  
                            
                            <p:column rendered="#{currentStudentController.subject.size()>8}" resizable="true" headerText="#{lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(8))).size()}" />  
                             <p:column rendered="#{currentStudentController.subject.size()>8}" resizable="true" headerText="%" />  
                           <p:column rendered="#{currentStudentController.subject.size()>8}" resizable="true" headerText="T" />  
                           <p:column rendered="#{currentStudentController.subject.size()>8}" resizable="true" headerText="T2" />  
                           
                           <p:column rendered="#{currentStudentController.subject.size()>0}" resizable="true" headerText="#{lectureController.lectureByFSListTotal}" />  
                            <p:column rendered="#{currentStudentController.subject.size()>0}" resizable="true" headerText="%" />  

                        </p:row> 
                    </p:columnGroup>
                    <p:column>
                        <h:outputText value="#{c.rollNo}"/>

                    </p:column>
                    <p:column>
                        <h:outputText value="#{c.admnNo.studentName}"/>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>0}">
                        <h:outputText value="#{c.theoryCount[1]}" />
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>0}">
                        <h:outputText value="#{c.theoryCount[1]/lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(0))).size()*100}" >
                            <f:convertNumber pattern="#0" />
                        </h:outputText>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>0}">
                        <h:outputText value="#{c.marksAll[1]}" />
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>0}">
                        <h:outputText value="#{c.marksAll2[1]}" />
                    </p:column>
                    
                    <p:column rendered="#{currentStudentController.subject.size()>1}">
                        <h:outputText value="#{c.theoryCount[2]}"/>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>1}">
                        <h:outputText value="#{c.theoryCount[2]/lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(1))).size()*100}" >
                            <f:convertNumber pattern="#0" />
                        </h:outputText>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>1}">
                        <h:outputText value="#{c.marksAll[2]}" />
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>1}">
                        <h:outputText value="#{c.marksAll2[2]}" />
                    </p:column>
                    
                    <p:column rendered="#{currentStudentController.subject.size()>2}">
                        <h:outputText value="#{c.theoryCount[3]}"/>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>2}">
                        <h:outputText value="#{c.theoryCount[3]/lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(2))).size()*100}" >
                            <f:convertNumber pattern="#0" />
                        </h:outputText>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>2}">
                        <h:outputText value="#{c.marksAll[3]}" />
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>2}">
                        <h:outputText value="#{c.marksAll2[3]}" />
                    </p:column>
                    
                    <p:column rendered="#{currentStudentController.subject.size()>3}">
                        <h:outputText value="#{c.theoryCount[4]}"/>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>3}">
                        <h:outputText value="#{c.theoryCount[4]/lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(3))).size()*100}" >
                            <f:convertNumber pattern="#0" />
                        </h:outputText>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>3}">
                        <h:outputText value="#{c.marksAll[4]}" />
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>3}">
                        <h:outputText value="#{c.marksAll2[4]}" />
                    </p:column>
                    
                    <p:column rendered="#{currentStudentController.subject.size()>4}">
                        <h:outputText value="#{c.theoryCount[5]}"/>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>4}">
                        <h:outputText value="#{c.theoryCount[5]/lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(4))).size()*100}" >
                            <f:convertNumber pattern="#0" />
                        </h:outputText>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>4}">
                        <h:outputText value="#{c.marksAll[5]}" />
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>4}">
                        <h:outputText value="#{c.marksAll2[5]}" />
                    </p:column>
                    
                    <p:column rendered="#{currentStudentController.subject.size()>5}">
                        <h:outputText value="#{c.theoryCount[6]}"/>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>5}">
                        <h:outputText value="#{c.theoryCount[6]/lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(5))).size()*100}" >
                            <f:convertNumber pattern="#0" />
                        </h:outputText>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>5}">
                        <h:outputText value="#{c.marksAll[6]}" />
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>5}">
                        <h:outputText value="#{c.marksAll2[6]}" />
                    </p:column>
                    
                    <p:column rendered="#{currentStudentController.subject.size()>6}">
                        <h:outputText value="#{c.theoryCount[7]}"/>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>6}">
                        <h:outputText value="#{c.theoryCount[7]/lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(6))).size()*100}" >
                            <f:convertNumber pattern="#0" />
                        </h:outputText>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>6}">
                        <h:outputText value="#{c.marksAll[7]}" />
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>6}">
                        <h:outputText value="#{c.marksAll2[7]}" />
                    </p:column>
                    
                    <p:column rendered="#{currentStudentController.subject.size()>7}">
                        <h:outputText value="#{c.theoryCount[8]}"/>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>7}">
                        <h:outputText value="#{c.theoryCount[8]/lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(7))).size()*100}" >
                            <f:convertNumber pattern="#0" />
                        </h:outputText>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>7}">
                        <h:outputText value="#{c.marksAll[8]}" />
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>7}">
                        <h:outputText value="#{c.marksAll2[8]}" />
                    </p:column>
                    
                    <p:column rendered="#{currentStudentController.subject.size()>8}">
                        <h:outputText value="#{c.theoryCount[9]}"/>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>8}">
                        <h:outputText value="#{c.theoryCount[9]/lectureController.getLectureByFSList(facultySubjectController.getIdFacSub(currentStudentController.division, 0, currentStudentController.subject.get(8))).size()*100}" >
                            <f:convertNumber pattern="#0" />
                        </h:outputText>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>8}">
                        <h:outputText value="#{c.marksAll[9]}" />
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>8}">
                        <h:outputText value="#{c.marksAll2[9]}" />
                    </p:column>
                    
                    <p:column rendered="#{currentStudentController.subject.size()>0}">
                        <h:outputText value="#{c.theoryCountTotal}"/>
                    </p:column>
                    <p:column rendered="#{currentStudentController.subject.size()>0}">
                        <h:outputText value="#{c.theoryCountTotal/lectureController.lectureByFSListTotal*100}" >
                            <f:convertNumber pattern="#0" />
                        </h:outputText>
                    </p:column>
                </p:dataTable>
                <p:panel header="Export" style="width: 80px;">
                    <h:commandLink action="#{currentStudentController.attendanceReportXlsExport()}">  
                        <p:graphicImage style="width: 50px; height: 100%" value="/resources/images/excel.jpg" />  

                    </h:commandLink>  
                </p:panel>


            </h:form> 
        </ui:define>
    </ui:composition>

</html>
