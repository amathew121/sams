<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="/template.xhtml">
        <ui:define name="title">

            <h:outputText value="Enter Marks for TEST 1"></h:outputText>
        </ui:define>
        <ui:define name="body">
            <h:outputText style="font-size: large;color: red" value="Enter marks for all questions ('0' for Not Attempted Questions) and refresh the page to get the total marks displayed. " escape="false"></h:outputText>
            <br />
            <h:outputText style="font-size: large;color: red" value="Please enter (-1) for absentees in Total. " escape="false"></h:outputText>

            <h:form >
                <p:growl id="growl" showDetail="true" autoUpdate="true" />

            </h:form >
            <h:form id="form">
                <h:panelGroup style="text-align: center">
                    <p:dataTable id="test" value="#{studentTestController.testDetails}" var="c" style="width: 95%">

                        <p:column headerText="RNo." width="4%">
                            <h:outputText value="#{c.rollNo}" />
                        </p:column>
                        <p:column headerText="Student Name" width="20%">
                            <h:outputText value="#{c.admnNo.studentName}" />
                        </p:column>
                        <p:column headerText="Q1.A">
                            <p:inputText rendered="#{c.admnNo != null}"  value="#{c.q1a}" valueChangeListener="#{studentTestController.testMarksChangedQ1A}" style="width: 50px" validatorMessage="Enter Marks only between 0 to 2" >
                                <f:validateLongRange minimum="0" maximum="2"/>
                                <p:ajax />
                            </p:inputText>
                        </p:column>

                        <p:column headerText="Q1.B">
                            <p:inputText rendered="#{c.admnNo != null}"  value="#{c.q1b}" valueChangeListener="#{studentTestController.testMarksChangedQ1B}" style="width: 50px" validatorMessage="Enter Marks only between 0 to 2">
                                <f:validateLongRange minimum="0" maximum="2"/>
                                <p:ajax />
                            </p:inputText>
                        </p:column>

                        <p:column headerText="Q1.C">
                            <p:inputText rendered="#{c.admnNo != null}"  value="#{c.q1c}" valueChangeListener="#{studentTestController.testMarksChangedQ1C}" style="width: 50px" validatorMessage="Enter Marks only between 0 to 2">
                                <f:validateLongRange minimum="0" maximum="2"/>
                                <p:ajax />
                            </p:inputText>
                        </p:column>

                        <p:column headerText="Q1.D">
                            <p:inputText rendered="#{c.admnNo != null}"  value="#{c.q1d}" valueChangeListener="#{studentTestController.testMarksChangedQ1D}" style="width: 50px" validatorMessage="Enter Marks only between 0 to 2">
                                <f:validateLongRange minimum="0" maximum="2"/>
                                <p:ajax />
                            </p:inputText>
                        </p:column>

                        <p:column headerText="Q1.E">
                            <p:inputText rendered="#{c.admnNo != null}"  value="#{c.q1e}" valueChangeListener="#{studentTestController.testMarksChangedQ1E}" style="width: 50px" validatorMessage="Enter Marks only between 0 to 2">
                                <f:validateLongRange minimum="0" maximum="2"/>
                                <p:ajax />
                            </p:inputText>
                        </p:column>

                        <p:column headerText="Q1.F">
                            <p:inputText rendered="#{c.admnNo != null}"  value="#{c.q1f}" valueChangeListener="#{studentTestController.testMarksChangedQ1F}" style="width: 50px" validatorMessage="Enter Marks only between 0 to 2" >
                                <f:validateLongRange minimum="0" maximum="2"/>
                                <p:ajax />
                            </p:inputText>
                        </p:column>

                        <p:column headerText="Q2.A">
                            <p:inputText rendered="#{c.admnNo != null}"  value="#{c.q2a}" valueChangeListener="#{studentTestController.testMarksChangedQ2A}" style="width: 50px" validatorMessage="Enter Marks only between 0 to 5">
                                 <f:validateLongRange minimum="0" maximum="5"/>
                                <p:ajax />
                            </p:inputText>
                        </p:column>

                        <p:column headerText="Q2.B">
                            <p:inputText rendered="#{c.admnNo != null}"  value="#{c.q2b}" valueChangeListener="#{studentTestController.testMarksChangedQ2B}" style="width: 50px"  validatorMessage="Enter Marks only between 0 to 5">
                                 <f:validateLongRange minimum="0" maximum="5"/>
                                <p:ajax />
                            </p:inputText>
                        </p:column>

                        <p:column headerText="Q3.A">
                            <p:inputText rendered="#{c.admnNo != null}"  value="#{c.q3a}" valueChangeListener="#{studentTestController.testMarksChangedQ3A}" style="width: 50px"  validatorMessage="Enter Marks only between 0 to 5">
                                <f:validateLongRange minimum="0" maximum="5"/>
                                <p:ajax />
                            </p:inputText>
                        </p:column>

                        <p:column headerText="Q3.B">
                            <p:inputText rendered="#{c.admnNo != null}"  value="#{c.q3b}" valueChangeListener="#{studentTestController.testMarksChangedQ3B}" style="width: 50px"  validatorMessage="Enter Marks only between 0 to 5">
                                <f:validateLongRange minimum="0" maximum="5"/>
                                <p:ajax />
                            </p:inputText>
                        </p:column>


                        <p:column headerText="Total" width="10%">
                            <p:inputText rendered="#{c.admnNo != null}"  value="#{c.marks}" valueChangeListener="#{studentTestController.testMarksChanged}" style =" width: 60px">
                                <p:ajax />
                            </p:inputText>
                        </p:column>
                        <p:column headerText="Test 2" rendered="false">
                            <p:inputText rendered="#{c.admnNo != null}"  value="#{c.marks2}" valueChangeListener="#{studentTestController.test2MarksChanged}" >
                                <p:ajax />
                            </p:inputText>
                        </p:column>


                    </p:dataTable>
                </h:panelGroup>

                <p:panel header="Export" style="width: 80px;">
                    <h:commandLink>  
                        <p:graphicImage value="/resources/images/excel.jpg" 
                                        style="width: 50px; height: 100%" />  
                        <p:dataExporter type="xls" target="test" 
                                        fileName="#{facultySubjectController.getIdFacSub(dashboardBean.getFacSub().idFacultySubject)}#{'TestReport'}" />  
                    </h:commandLink>   
                </p:panel>

            </h:form> 
        </ui:define>
    </ui:composition>

</html>
